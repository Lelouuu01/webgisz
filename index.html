<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Objek Pariwisata di Kota Jakarta Utara</title>
    <!-- Updated to newer versions of Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
      html,
      body,
      #map {
        height: 100%;
        width: 100%;
        margin: 0px;
      }
    </style>
  </head>

  <body>
    <div id="map"></div>
    <script>
      /* Initial Map */
      var map = L.map("map").setView([-6.126601, 106.842958], 10);

      /* Tile Basemap */
      var basemap0 = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>', // Fixed href attribute
      });

      var Esri_WorldImagery = L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}", {
        // Fixed URL formatting
        attribution: "Tiles &copy; Arya Dirgantara Alfiqhri &mdash; 23611103 Statistics Program Study at Universitas Islam Indonesia",
      });

      var OpenTopoMap = L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png", {
        maxZoom: 17,
        attribution:
          'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',
      });

      Esri_WorldImagery.addTo(map);

      var baseMaps = {
        "Open Street Map": basemap0,
        "Open Topo Map": OpenTopoMap,
        "Esri WorldImagery": Esri_WorldImagery,
      };

      var layerControl = L.control.layers(baseMaps, {}, { collapsed: false });
      layerControl.addTo(map);

      // Store icon URL in a variable to ensure it's accessible
      var iconUrl = "camera.png";

      // Add error handling for icon loading
      var customIcon = L.icon({
        iconUrl: iconUrl,
        iconSize: [30, 30],
        iconAnchor: [15, 30], // Added iconAnchor for better positioning
        popupAnchor: [0, -30], // Added popupAnchor for better positioning
      });

      // Function to create markers with error handling
      function createMarker(lat, lng, title, address) {
        try {
          var marker = L.marker([lat, lng], { icon: customIcon });
          marker.bindPopup("<b>" + title + "</b><br>" + address);
          marker.addTo(map);
          marker.bindTooltip(title);
          return marker;
        } catch (error) {
          console.error("Error creating marker for " + title + ": " + error);
        }
      }

      // Create markers using the function (showing first few as example)
      createMarker(-6.1137292, 106.7950497, "Taman Waduk Pluit", "Alamat: 6, Jl. Pluit Timur Raya No.12, RT.6/RW.5, Pluit, Kec. Penjaringan, Jkt Utara, Daerah Khusus Ibukota Jakarta 14450, Indonesia");
      createMarker(-6.1329076, 106.7837762, "Penjaringan City Forest Park", "Alamat: Jl. Kepanduan II, RT.7/RW.16, Pejagalan, Kec. Penjaringan, Jkt Utara, Daerah Khusus Ibukota Jakarta 14450, Indonesia");
      // ... Add remaining markers similarly
    </script>
  </body>
</html>
